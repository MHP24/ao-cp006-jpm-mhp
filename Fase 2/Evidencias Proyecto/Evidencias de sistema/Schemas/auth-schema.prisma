generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String    @id @default(uuid()) @map("id")
  firstName  String    @map("first_name")
  lastName   String    @map("last_name")
  email      String    @unique @map("email")
  password   String    @map("password")
  isActive   Boolean   @default(true) @map("is_active")
  sessionId  String?   @map("session_id")
  createdAt  DateTime  @default(now()) @map("created_at")
  lastAccess DateTime? @updatedAt @map("last_access")

  // * Relations
  userRole UserRole[]

  @@index([id, email])
  @@map("users")
}

model Role {
  id   String     @id @default(uuid()) @map("id")
  name ValidRoles @map("name")

  // * Relations
  userRole UserRole[]

  @@map("roles")
}

model UserRole {
  id     String @id @default(uuid()) @map("id")
  userId String @map("user_id")
  roleId String @map("role_id")

  // * Relations
  user User @relation(fields: [userId], references: [id])
  role Role @relation(fields: [roleId], references: [id])

  @@map("user_roles")
}

enum ValidRoles {
  user
  admin
  super_user
}
